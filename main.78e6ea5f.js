parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ir8I":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(e){var n=i(e,"string");return"symbol"==t(n)?n:String(n)}function i(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var u=function(){return o(function t(n){e(this,t),this.initialState=n,console.log(n)},[{key:"moveLeft",value:function(){}},{key:"moveRight",value:function(){}},{key:"moveUp",value:function(){}},{key:"moveDown",value:function(){}},{key:"getScore",value:function(){}},{key:"getState",value:function(){}},{key:"getStatus",value:function(){}},{key:"start",value:function(){}},{key:"restart",value:function(){}}])}();module.exports=u;
},{}],"6KIz":[function(require,module,exports) {
"use strict";function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,f=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return f=e.done,e},e:function(e){i=!0,u=e},f:function(){try{f||null==r.return||r.return()}finally{if(i)throw u}}}}function t(e){return a(e)||o(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function a(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=require("../modules/Game.class"),l=new i(f),s=0,c=document.querySelector(".game-score"),m=structuredClone(f),h=document.querySelectorAll(".field-cell"),v=document.querySelector(".button"),d=document.querySelector(".message-start"),g=document.querySelector(".message-win"),y=document.querySelector(".message-lose");function b(){for(var e=Math.round(3*Math.random()),t=Math.round(3*Math.random()),r=Math.random()<.1?4:2;m[e][t]>0&&s<h.length;)e=Math.round(3*Math.random()),t=Math.round(3*Math.random());m[e][t]=r,s++,c.textContent=l.getScore(),p()}function p(){for(var e=0;e<h.length;e++)h[e].textContent=0===m[Math.floor(e/4)][e%4]?"":m[Math.floor(e/4)][e%4],h[e].className=0===m[Math.floor(e/4)][e%4]?"field-cell":"field-cell field-cell--".concat(m[Math.floor(e/4)][e%4])}function S(){for(var e=!1,t=m.length-2;t>=0;t--)for(var r=0;r<m[t].length;r++)m[t+1][r]===m[t][r]&&0!==m[t][r]&&(e=!0);for(var n=m.length-1;n>0;n--)for(var o=0;o<m[n].length;o++)m[n-1][o]===m[n][o]&&0!==m[n][o]&&(e=!0);for(var a=0;a<m.length;a++)for(var u=1;u<m[a].length;u++)m[a][u-1]===m[a][u]&&0!==m[a][u]&&(e=!0);for(var f=0;f<m.length;f++)for(var i=m[f].length-2;i>=0;i--)m[f][i+1]===m[f][i]&&0!==m[f][i]&&(e=!0);return e}v.addEventListener("click",function(){"button restart"===v.className&&l.restart(),"button start"===v.className&&l.start()}),document.addEventListener("keydown",function(e){switch(e.keyCode){case 37:l.moveLeft();break;case 38:l.moveUp();break;case 39:l.moveRight();break;case 40:l.moveDown()}t(h).some(function(e){return"2048"===e.textContent})&&(g.className="message message-win"),s!==h.length||S()||(y.className="message message-lose")}),l.start=function(){d.className="message message-start hidden",y.className="message message-lose hidden",g.className="message message-win hidden",v.className="button restart",v.textContent="Restart",b(),b()},l.restart=function(){s=0,c.textContent=0,m=structuredClone(f),l.start()},l.getScore=function(){var t,r=0,n=e(m);try{for(n.s();!(t=n.n()).done;){r+=t.value.reduce(function(e,t){return e+t})}}catch(o){n.e(o)}finally{n.f()}return r},l.moveDown=function(){for(var e=!1,t=[],r=0;r<m.length;r++)for(var n=m.length-2;n>=0;n--)for(var o=function(r){if(m[n+1][r]===m[n][r]&&0!==m[n][r]&&t.every(function(e){return e!==r})){if(0!==m[0][r]&&0!==m[3][r]&&m[0][r]===m[1][r]&&m[2][r]===m[3][r])return m[3][r]=2*m[2][r],m[2][r]=2*m[1][r],m[1][r]=0,m[0][r]=0,e=!0,t.push(r),s-=2,1;m[n+1][r]*=2,m[n][r]=0,e=!0,t.push(r),s--}if(0===m[n+1][r]&&0!==m[n][r]){var o=[m[n][r],m[n+1][r]];m[n+1][r]=o[0],m[n][r]=o[1],e=!0}},a=0;a<m[n].length;a++)o(a);e&&b()},l.moveUp=function(){for(var e=!1,t=[],r=0;r<m.length;r++)for(var n=m.length-1;n>0;n--)for(var o=function(r){if(m[n-1][r]===m[n][r]&&0!==m[n][r]&&t.every(function(e){return e!==r})){if(0!==m[0][r]&&0!==m[3][r]&&m[0][r]===m[1][r]&&m[2][r]===m[3][r])return m[0][r]=2*m[1][r],m[1][r]=2*m[2][r],m[2][r]=0,m[3][r]=0,e=!0,t.push(r),s-=2,1;m[n-1][r]*=2,m[n][r]=0,e=!0,t.push(r),s--}if(0===m[n-1][r]&&0!==m[n][r]){var o=[m[n][r],m[n-1][r]];m[n-1][r]=o[0],m[n][r]=o[1],e=!0}},a=0;a<m[n].length;a++)o(a);e&&b()},l.moveLeft=function(){for(var e=!1,t=[],r=0;r<m.length;r++)for(var n=function(r){for(var n=1;n<m[r].length;n++){if(m[r][n-1]===m[r][n]&&0!==m[r][n]&&t.every(function(e){return e!==r})){if(0!==m[r][0]&&0!==m[r][3]&&m[r][0]===m[r][1]&&m[r][2]===m[r][3]){m[r][0]=2*m[r][1],m[r][1]=2*m[r][2],m[r][2]=0,m[r][3]=0,e=!0,t.push(r),s-=2;continue}m[r][n-1]*=2,m[r][n]=0,e=!0,t.push(r),s--}if(0===m[r][n-1]&&0!==m[r][n]){var o=[m[r][n],m[r][n-1]];m[r][n-1]=o[0],m[r][n]=o[1],e=!0}}},o=0;o<m.length;o++)n(o);e&&b()},l.moveRight=function(){for(var e=!1,t=[],r=0;r<m.length;r++)for(var n=function(r){for(var n=m[r].length-2;n>=0;n--){if(m[r][n+1]===m[r][n]&&0!==m[r][n]&&t.every(function(e){return e!==r})){if(0!==m[r][0]&&0!==m[r][3]&&m[r][0]===m[r][1]&&m[r][2]===m[r][3]){m[r][3]=2*m[r][2],m[r][2]=2*m[r][1],m[r][1]=0,m[r][0]=0,e=!0,t.push(r),s-=2;continue}m[r][n+1]*=2,m[r][n]=0,e=!0,t.push(r),s--}if(0===m[r][n+1]&&0!==m[r][n]){var o=[m[r][n],m[r][n+1]];m[r][n+1]=o[0],m[r][n]=o[1],e=!0}}},o=0;o<m.length;o++)n(o);e&&b()};
},{"../modules/Game.class":"Ir8I"}]},{},["6KIz"], null)
//# sourceMappingURL=main.78e6ea5f.js.map